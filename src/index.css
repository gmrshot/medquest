@tailwind base;
@tailwind components;
@tailwind utilities;

/* ring colors */
:root { --ring-bg:#e5e7eb; --ring-fg:#6366f1; }
.dark:root { --ring-bg:#1f2937; --ring-fg:#8b5cf6; }

/* cards, pills, buttons */
.mq-card{@apply rounded-2xl p-5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow transition-transform;}
.mq-card:hover{ transform:translateY(-2px) scale(1.02); box-shadow:0 16px 40px rgba(0,0,0,.15); }
.mq-card:active{ transform:translateY(0) scale(.995); }

.mq-pill{
  @apply px-4 py-2 rounded-full text-sm font-semibold border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 transition shadow;
}
.mq-pill:hover{ transform:translateY(-1px) scale(1.03); box-shadow:0 10px 18px rgba(0,0,0,.12); }
.mq-pill:active{ transform:translateY(0) scale(.98); box-shadow:0 6px 12px rgba(0,0,0,.15); }
.mq-pill--on{ @apply bg-indigo-600 text-white border-indigo-600 shadow-lg; }

.mq-btn{@apply px-4 py-2 rounded-xl font-semibold transition shadow;}
.mq-btn:hover{ transform:translateY(-1px); box-shadow:0 12px 20px rgba(0,0,0,.15); }
.mq-btn:active{ transform:translateY(0) scale(.98); box-shadow:0 6px 10px rgba(0,0,0,.12); }
.mq-btn--primary{@apply text-white bg-indigo-600 hover:bg-indigo-500;}
.mq-btn--outline{@apply border border-indigo-300 text-indigo-700 dark:text-indigo-300 bg-transparent hover:bg-indigo-50 dark:hover:bg-indigo-950/30;}
.mq-btn--ghost{@apply border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 hover:bg-slate-50 dark:hover:bg-slate-800;}

.mq-mini-tile{@apply cursor-pointer rounded-xl px-4 py-3 border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/40 hover:shadow flex items-center gap-2 transition-transform;}
.mq-mini-tile:hover{ transform:translateY(-1px) scale(1.03); }
.mq-mini-tile:active{ transform:scale(.985); }
.mq-mini-tile--accent{@apply text-white border border-indigo-600; background-image: linear-gradient(90deg, #ff6bd6, #705cff); }
.mq-mini-tile__icon{font-size:18px;}
.mq-mini-tile__text{font-weight:700;}

/* modal */
.mq-modal{position:fixed; inset:0; z-index:60;}
.mq-modal__backdrop{position:absolute; inset:0; background:rgba(0,0,0,.55);}
.mq-modal__panel{position:absolute; left:50%; top:24px; transform:translateX(-50%); width:min(1100px,92vw); @apply rounded-2xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 shadow-2xl;}
.mq-modal__panel--wide{width:min(1100px,92vw);}
.mq-modal__bar{@apply flex items-center justify-between px-6 py-4 border-b border-slate-200 dark:border-slate-700;}
.mq-modal__title{@apply text-lg font-bold;}
.mq-modal__x{@apply px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-800;}
.mq-modal__body{@apply p-6 max-h-[75vh] overflow-auto;}

/* ring */
.mq-ring{position:relative; display:inline-block;}
.mq-ring__bg{stroke:var(--ring-bg);}
.mq-ring__fg{stroke:var(--ring-fg);}
.mq-ring__text{position:absolute; inset:0; display:grid; place-items:center; font-size:.75rem; font-weight:700;}

/* chips / inputs / subtile / answers */
.mq-chip{@apply px-3 py-1 rounded-full border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-sm transition-transform;}
.mq-chip:hover{ transform:translateY(-1px); }
.mq-chip--on{@apply border-emerald-400 bg-emerald-50 dark:bg-emerald-900/40;}

.mq-input{@apply px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-800 dark:text-white;}
.mq-subtile{@apply rounded-xl p-4 border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900/40 transition-transform;}
.mq-subtile:hover{ transform:translateY(-1px); }

.mq-answer{@apply text-left px-4 py-3 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 hover:bg-slate-50 dark:hover:bg-slate-800 transition;}
.mq-answer--sel{@apply ring-2 ring-indigo-500;}
.mq-answer--ok{@apply bg-emerald-50 dark:bg-emerald-900/30 border-emerald-300 dark:border-emerald-800;}
.mq-answer--no{@apply bg-rose-50 dark:bg-rose-900/30 border-rose-300 dark:border-rose-800;}

.mq-expl{@apply p-3 rounded-lg border;}
.mq-expl--ok{@apply bg-emerald-50 border-emerald-300 dark:bg-emerald-900/30 dark:border-emerald-800;}
.mq-expl--no{@apply bg-rose-50 border-rose-300 dark:bg-rose-900/30 dark:border-rose-800;}

/* review hemi circle */
.mq-hemi{width:40px; height:40px; position:relative;}
.mq-hemi::before{content:""; position:absolute; inset:0; border-radius:50%;
  background:conic-gradient(#ef4444 0deg, #ef4444 180deg, #22c55e 180deg, #22c55e 360deg);}
.mq-hemi::after{content:""; position:absolute; inset:4px; border-radius:50%; background:white;}
.dark .mq-hemi::after{background:#0f172a;}

/* floating relearn bubble + timer chip */
.mq-float{position:absolute; top:-10px; right:0; transform:translateY(-100%); z-index:5;}
.mq-timer{position:absolute; top:-10px; left:0; transform:translateY(-100%); background:#111; color:#fff; padding:.25rem .5rem; border-radius:.5rem; font-weight:800;}

/* LEFT vertical dock */
.mq-dock{position:fixed; top:84px; left:16px; width:210px; display:flex; flex-direction:column; gap:.75rem; z-index:30;}
.mq-dock-btn{display:flex; align-items:center; gap:.6rem; padding:.55rem .75rem; border-radius:9999px; background:rgba(148,163,184,.15); color:#0ea5e9; border:1px solid rgba(148,163,184,.35); transition:transform .15s, box-shadow .15s;}
.mq-dock-btn:hover{ transform:translateY(-1px); box-shadow:0 12px 18px rgba(0,0,0,.12); }
.mq-dock-btn:active{ transform:scale(.98); }
.mq-dock-btn.is-on{color:#16a34a; background:rgba(34,197,94,.12); border-color:rgba(34,197,94,.35);}
.mq-dock-icon{width:20px; height:20px; display:grid; place-items:center;}
.mq-dock-text{font-weight:800}

/* Tutorial (replay) button â€” bottom-left, medium */
.mq-tutor{
  position:fixed; left:18px; bottom:18px; z-index:60;
  padding:.65rem 1rem; border-radius:12px;
  font-weight:900; font-size:14px;
  background:#111; color:#fff; border:2px solid #60a5fa;
  box-shadow:0 14px 30px rgba(0,0,0,.18);
}
.mq-tutor:hover{ transform:translateY(-2px); box-shadow:0 22px 40px rgba(0,0,0,.22); }
.mq-tutor:active{ transform:translateY(0); }

/* ---------------- High-Vis: readable & colorful ---------------- */
/* Base text: high-contrast solid (not gradient) so it's readable everywhere */
html[data-highvis="true"].dark { --hv-fg: #f8fafc; }
html[data-highvis="true"]:not(.dark) { --hv-fg: #0a0a0a; }

html[data-highvis="true"] :where(p,li,div,span,small,label,td,th) {
  color: var(--hv-fg) !important;
}

/* Accents only: headings & interactive controls get animated gradient text */
@keyframes mqColorSweep { 0% {background-position:0% 50%} 100% {background-position:300% 50%} }

html[data-highvis="true"] :where(h1,h2,h3,.mq-mini-tile__text,.mq-pill,.mq-btn--ghost,.mq-btn--outline) {
  background: linear-gradient(90deg,#00eaff,#ff6bd6,#8b5cf6,#22c55e,#f97316);
  background-size: 300% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  animation: mqColorSweep 8s linear infinite;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* Primary buttons should stay solid for legibility */
html[data-highvis="true"] .mq-btn--primary { color: #fff !important; }

/* Keep correctness colors obvious even in High-Vis */
html[data-highvis="true"] .mq-answer--ok { color:#16a34a !important; -webkit-text-fill-color:#16a34a; background:transparent; }
html[data-highvis="true"] .mq-answer--no { color:#dc2626 !important; -webkit-text-fill-color:#dc2626; background:transparent; }

/* ---------------- Tutorial spotlight ---------------- */
/* Whole overlay but non-blocking except the card */
.mq-tour{position:fixed; inset:0; z-index:70; pointer-events:none;}
/* Spotlight hole using gigantic box-shadow; does not capture clicks */
.mq-tour__mask{
  position:absolute; border-radius:16px; pointer-events:none;
  box-shadow:0 0 0 9999px rgba(0,0,0,.65);
  border:3px solid transparent;
  border-image: linear-gradient(90deg,#00eaff,#ff6bd6,#8b5cf6,#22c55e,#f97316) 1;
}
/* Centered tutorial card (clickable) */
.mq-tour__center{
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  pointer-events:auto;
  width:min(760px, 92vw);
  background:#0b1220; color:#fff; padding:20px 18px; border-radius:16px;
  border:3px solid #60a5fa; box-shadow:0 24px 64px rgba(0,0,0,.55);
}
.mq-tour__title{
  font-weight:900; font-size:24px; margin-bottom:6px;
  background: linear-gradient(90deg,#00eaff,#ff6bd6,#8b5cf6);
  -webkit-background-clip: text; background-clip:text; color:transparent;
}
.mq-tour__body{ opacity:.96; line-height:1.55; }
.mq-tour__row{ display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:14px; }
